!function(e){if("function"==typeof bootstrap)bootstrap("hark",e);else if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeHark=e}else"undefined"!=typeof window?window.hark=e():global.hark=e()}(function(){return function(e,t,n){function i(n,a){if(!t[n]){if(!e[n]){var r="function"==typeof require&&require;if(!a&&r)return r(n,!0);if(s)return s(n,!0);throw Error("Cannot find module '"+n+"'")}var o=t[n]={exports:{}};e[n][0].call(o.exports,function(t){var s=e[n][1][t];return i(s?s:t)},o,o.exports)}return t[n].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t){function n(e,t){var n=-1/0;e.getFloatFrequencyData(t);for(var i=4,s=t.length;s>i;i++)t[i]>n&&t[i]<0&&(n=t[i]);return n}var i,s=e("wildemitter");"undefined"!=typeof window&&(i=window.AudioContext||window.webkitAudioContext);var a=null;t.exports=function(e,t){var r=new s;if(!i)return r;var t=t||{},o=t.smoothing||.1,c=t.interval||50,l=t.threshold,u=t.play,f=t.history||10,h=!0;a=t.audioContext||a||new i;var p,g,d;d=a.createAnalyser(),d.fftSize=512,d.smoothingTimeConstant=o,g=new Float32Array(d.frequencyBinCount),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement||e instanceof HTMLVideoElement?(p=a.createMediaElementSource(e),void 0===u&&(u=!0),l=l||-50):(p=a.createMediaStreamSource(e),l=l||-50),p.connect(d),u&&d.connect(a.destination),r.speaking=!1,r.suspend=function(){return a.suspend()},r.resume=function(){return a.resume()},Object.defineProperty(r,"state",{get:function(){return a.state}}),a.onstatechange=function(){r.emit("state_change",a.state)},r.setThreshold=function(e){l=e},r.setInterval=function(e){c=e},r.stop=function(){h=!1,r.emit("volume_change",-100,l),r.speaking&&(r.speaking=!1,r.emit("stopped_speaking")),d.disconnect(),p.disconnect()},r.speakingHistory=[];for(var k=0;f>k;k++)r.speakingHistory.push(0);var m=function(){setTimeout(function(){if(h){var e=n(d,g);r.emit("volume_change",e,l);var t=0;if(e>l&&!r.speaking){for(var i=r.speakingHistory.length-3;i<r.speakingHistory.length;i++)t+=r.speakingHistory[i];2>t||(r.speaking=!0,r.emit("speaking"))}else if(l>e&&r.speaking){for(var i=0;i<r.speakingHistory.length;i++)t+=r.speakingHistory[i];0==t&&(r.speaking=!1,r.emit("stopped_speaking"))}r.speakingHistory.shift(),r.speakingHistory.push(0+(e>l)),m()}},c)};return m(),r}},{wildemitter:2}],2:[function(e,t){function n(){}t.exports=n,n.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(e){this.callbacks=this.callbacks||{};var t=3===arguments.length,n=t?arguments[1]:void 0,i=t?arguments[2]:arguments[1];return i._groupName=n,(this.callbacks[e]=this.callbacks[e]||[]).push(i),this},t.once=function(e){function t(){n.off(e,t),a.apply(this,arguments)}var n=this,i=3===arguments.length,s=i?arguments[1]:void 0,a=i?arguments[2]:arguments[1];return this.on(e,s,t),this},t.releaseGroup=function(e){this.callbacks=this.callbacks||{};var t,n,i,s;for(t in this.callbacks)for(s=this.callbacks[t],n=0,i=s.length;i>n;n++)s[n]._groupName===e&&(s.splice(n,1),n--,i--);return this},t.off=function(e,t){this.callbacks=this.callbacks||{};var n,i=this.callbacks[e];return i?1===arguments.length?(delete this.callbacks[e],this):(n=i.indexOf(t),i.splice(n,1),0===i.length&&delete this.callbacks[e],this):this},t.emit=function(e){this.callbacks=this.callbacks||{};var t,n,i,s=[].slice.call(arguments,1),a=this.callbacks[e],r=this.getWildcardCallbacks(e);if(a)for(i=a.slice(),t=0,n=i.length;n>t&&i[t];++t)i[t].apply(this,s);if(r)for(n=r.length,i=r.slice(),t=0,n=i.length;n>t&&i[t];++t)i[t].apply(this,[e].concat(s));return this},t.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var t,n,i=[];for(t in this.callbacks)n=t.split("*"),("*"===t||2===n.length&&e.slice(0,n[0].length)===n[0])&&(i=i.concat(this.callbacks[t]));return i}},n.mixin(n)},{}]},{},[1])(1)});